{"version":3,"sources":["api/api.ts","Person/PersonRow.tsx","PeopleTable/PeopleTable.tsx","PeoplePage.tsx","App.tsx","index.tsx"],"names":["TABLE_TITLES","PersonRow","people","history","useHistory","location","useLocation","personSlug","useParams","handleChange","personUrl","push","pathname","search","map","person","className","cn","person__active","slug","key","name","id","role","onClick","person__male","sex","person__female","born","died","person__whithoutParent","motherSlug","motherName","fatherSlug","fatherName","PeopleTable","searchParams","URLSearchParams","query","useMemo","get","sortBy","sortOrder","useState","setPeople","currentQuery","setCurrentQuery","useEffect","fetch","then","responce","json","data","index","mother","find","mom","father","dad","historyPushWithDebounce","useCallback","debounce","preparedPeople","filter","toLowerCase","includes","filterPeople","sort","a","b","localeCompare","placeholder","type","value","onChange","event","target","set","toString","title","handleTitleClick","src","alt","PeoplePage","HomePage","App","to","exact","activeClassName","path","component","from","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5757c9ac.chunk.js","sourcesContent":["const API_URL = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const getPeople = (): Promise<Person[]> => {\n  return fetch(API_URL)\n    .then(responce => responce.json());\n};\n\nexport const TABLE_TITLES = [\n  'Id',\n  'Name',\n  'Sex',\n  'Born',\n  'Died',\n  'Mother',\n  'Father',\n];\n","import React from 'react';\nimport { useHistory, useParams, useLocation } from 'react-router-dom';\nimport cn from 'classnames';\nimport './Person.scss';\n\ntype Props = {\n  people: Person[];\n};\n\nexport const PersonRow: React.FC<Props> = ({ people }) => {\n  const history = useHistory();\n  const location = useLocation();\n  const { personSlug } = useParams();\n\n  const handleChange = (personUrl?: string) => {\n    history.push({\n      pathname: `/people/${personUrl}`,\n      search: location.search,\n    });\n  };\n\n  return (\n    <>\n      {people.map((person: Person) => (\n        <tr\n\n          className={cn('person', {\n            person__active: person.slug === personSlug,\n          })}\n          key={person.name}\n        >\n          <td>{person.id}</td>\n          <td\n            role=\"gridcell\"\n            onClick={() => handleChange(person.slug)}\n            className={cn({\n              person__male: person.sex === 'm',\n              person__female: person.sex === 'f',\n            })}\n          >\n            {person.name}\n          </td>\n          <td role=\"gridcell\">\n            {person.sex}\n          </td>\n          <td>{person.born}</td>\n          <td>{person.died}</td>\n          <td\n            role=\"gridcell\"\n            className={cn('person__female', {\n              person__whithoutParent: personSlug === person.motherSlug\n              && person.motherSlug === person.motherName,\n            })}\n            onClick={() => handleChange(person.motherSlug)}\n          >\n            {personSlug === person.motherSlug\n              && person.motherSlug === person.motherName && <span className=\"error\">No info about</span>}\n            {person.motherName}\n          </td>\n          <td\n            role=\"gridcell\"\n            onClick={() => handleChange(person.fatherSlug)}\n            className={cn('person__male', {\n              person__whithoutParent: personSlug === person.fatherSlug\n            && person.fatherSlug === person.fatherName,\n            })}\n          >\n            {personSlug === person.fatherSlug\n              && person.fatherSlug === person.fatherName\n              && <span className=\"error\">No info about</span>}\n\n            {person.fatherName}\n          </td>\n\n        </tr>\n      ))}\n    </>\n  );\n};\n","import React, {\n  useState, useEffect, useMemo, useCallback,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { getPeople, TABLE_TITLES } from '../api/api';\nimport { PersonRow } from '../Person/PersonRow';\n\nimport './PeopleTable.scss';\n\n\nconst filterPeople = (people: Person[], query: string) => {\n  return (\n    people.filter((person) => (person.name + person.fatherName + person.motherName)\n      .toLowerCase()\n      .includes(query.toLowerCase()))\n  );\n};\n\nexport const PeopleTable = () => {\n  const history = useHistory();\n  const location = useLocation();\n\n  const searchParams = new URLSearchParams(location.search);\n  const query = useMemo(() => searchParams.get('query') || '', [searchParams]);\n  const sortBy = useMemo(() => searchParams.get('sortBy') || '', [searchParams]);\n  const sortOrder = useMemo(() => searchParams.get('sortOrder') || '', [searchParams]);\n\n  const [people, setPeople] = useState<Person[]>([]);\n  const [currentQuery, setCurrentQuery] = useState<string>(query);\n\n\n  useEffect(() => {\n    getPeople()\n      .then(data => setPeople(\n        data.map((person, index) => {\n          const mother = data.find(mom => mom.name === person.motherName);\n          const father = data.find(dad => dad.name === person.fatherName);\n\n          return {\n            ...person,\n            id: index + 1,\n            motherSlug: mother?.slug || person.motherName,\n            fatherSlug: father?.slug || person.fatherName,\n          };\n        }),\n      ));\n  }, []);\n\n  const historyPushWithDebounce = useCallback(debounce(history.push, 500), []);\n\n  const handlerQueryChange = (event: { target: { value: string } }) => {\n    setCurrentQuery(event.target.value);\n    searchParams.set('query', event.target.value);\n    historyPushWithDebounce({\n      search: searchParams.toString(),\n    });\n  };\n\n  const preparedPeople = useMemo(() => filterPeople(people, query), [people, query]);\n\n  useMemo(() => {\n    switch (sortOrder) {\n      case 'desc':\n        switch (sortBy) {\n          case 'id':\n          case 'born':\n          case 'died':\n            preparedPeople.sort((a, b) => b[sortBy] - a[sortBy]);\n            break;\n          case 'name':\n          case 'sex':\n            preparedPeople.sort((a, b) => b[sortBy].localeCompare(a[sortBy]));\n            break;\n          default:\n        }\n\n        break;\n      case 'asc':\n        switch (sortBy) {\n          case 'id':\n          case 'born':\n          case 'died':\n            preparedPeople.sort((a, b) => a[sortBy] - b[sortBy]);\n            break;\n          case 'name':\n          case 'sex':\n            preparedPeople.sort((a, b) => a[sortBy].localeCompare(b[sortBy]));\n            break;\n          default:\n        }\n\n        break;\n      default:\n    }\n  },\n  [preparedPeople, sortOrder, sortBy]);\n\n  const handleTitleClick = (title: string) => {\n    if (title === 'mother' || title === 'father') {\n      return;\n    }\n\n    if (sortBy === title && sortOrder === 'asc') {\n      searchParams.set('sortOrder', 'desc');\n    } else {\n      searchParams.set('sortOrder', 'asc');\n    }\n\n    searchParams.set('sortBy', title);\n    history.push({\n      search: searchParams.toString(),\n    });\n  };\n\n  return (\n    <>\n      <input\n        placeholder=\" Filtering people by name\"\n        type=\"text\"\n        value={currentQuery}\n        onChange={handlerQueryChange}\n      />\n      <table className=\"people\" role=\"grid\">\n        <thead>\n          <tr>\n            {TABLE_TITLES.map((title: string) => (\n              <th\n                key={title}\n                onClick={() => handleTitleClick(title.toLowerCase())}\n              >\n                {title}\n                {sortOrder === 'asc' && title.toLowerCase() === sortBy\n                && (\n                  <img className=\"sortFlag\" src=\"./api/sort-down.svg\" alt=\"sort_icon\" />\n                )}\n                {sortOrder === 'desc' && title.toLowerCase() === sortBy\n                && (\n                  <img className=\"sortFlag\" src=\"./api/sort-up.svg\" alt=\"sort_icon\" />\n                )}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <PersonRow people={preparedPeople} />\n        </tbody>\n      </table>\n    </>\n  );\n};\n","import React from 'react';\n// import { NavLink, Route } from 'react-router-dom';\n\nimport { PeopleTable } from './PeopleTable/PeopleTable';\n\nexport const PeoplePage = () => {\n  return (\n    <>\n      <h2>PeoplePage</h2>\n      <PeopleTable />\n    </>\n  );\n};\n","import React from 'react';\nimport {\n  NavLink, Route, Switch, Redirect,\n} from 'react-router-dom';\nimport './App.scss';\nimport { PeoplePage } from './PeoplePage';\n\nconst HomePage = () => <h2>Home</h2>;\n\nconst App = () => (\n  <>\n    <nav className=\"nav\">\n      <ul className=\"nav__list\">\n        <li>\n          <NavLink\n            to=\"/\"\n            exact\n            className=\"nav__link\"\n            activeClassName=\"nav__link--active\"\n          >\n            Home\n          </NavLink>\n        </li>\n        <li>\n          <NavLink\n            to=\"/people\"\n            className=\"nav__link\"\n            activeClassName=\"nav__link--active\"\n          >\n            People\n          </NavLink>\n        </li>\n      </ul>\n    </nav>\n    <Switch>\n      <Route path=\"/\" exact component={HomePage} />\n      <Redirect from=\"/home\" to=\"/\" />\n      <Route\n        exact\n        path=\"/people/:personSlug?\"\n        component={PeoplePage}\n      />\n      <h1>Page not found</h1>\n    </Switch>\n\n  </>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter><App /></HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}